<div [ngClass]="{'pt-4':isArray(content)}">
    <div class="py-0">
        <div *ngIf="isArray(content) else obj">
            <div class="mb-2" *ngFor="let item of content; let mainIndex = index;">
                <p class="text-xl">{{item.title}}</p>
                <div *ngIf="isArray(item.content)">
                    <div *ngFor="let subItem of item.content; let i=index " class="pl-4">
                        <div class="flex col-12 p-0 "
                            (mouseover)="showCommentIcon = true;seletedMainIndex=mainIndex;selecteedSubIndex =i "
                            (mouseleave)="showCommentIcon = false">
                            <div class="col-10 p-0">
                                <p class="m-0 flex flex-wrap pb-1 line-height-3">
                                    <span class="sub-title text-base font-medium"
                                        *ngFor="let word of subItem?.title?.split(' '); index as i" class="mr-1"
                                        [innerHTML]="word | highlight: searchTerm" (mouseup)="contentSelected($event)">
                                        <p-overlayPanel #selectionText>
                                            <xnode-add-comment-overlay-panel [width]="'auto'" [users]="users"
                                                *ngIf="selectedText.length>0"
                                                (closeOverlay)="selectionText.toggle(false)" [parentEntity]="'SPEC'"
                                                [selectedText]="selectedText" [parentTitle]="parentTitle"
                                                [specId]="specId" [parentId]="specItem.id" [position]="'absolute'"
                                                [selectedContent]="item"
                                                placeHolder="Add a Comment"></xnode-add-comment-overlay-panel>
                                        </p-overlayPanel>
                                    </span>
                                    :
                                    <span class="sub-content font-normal text-base"
                                        *ngFor="let word of subItem?.content?.split(' '); index as i" class="mr-1"
                                        [innerHTML]="word | highlight: searchTerm" (mouseup)="contentSelected($event)">
                                        <p-overlayPanel #selectionText>
                                            <xnode-add-comment-overlay-panel [width]="'auto'" [users]="users"
                                                *ngIf="selectedText.length>0" [parentTitle]="parentTitle"
                                                (closeOverlay)="selectionText.toggle(false)"
                                                [selectedText]="selectedText" [parentEntity]="'SPEC'"
                                                [parentId]="specItem.id" [position]="'absolute'"
                                                [selectedContent]="item"
                                                placeHolder="Add a Comment"></xnode-add-comment-overlay-panel>
                                        </p-overlayPanel>
                                    </span>
                                </p>
                            </div>
                            <div class="col-1 p-0 flex  align-items-start justify-content-center">
                                <p-overlayPanel #op>
                                    <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="users"
                                        (closeOverlay)="op.toggle(false)" [parentTitle]="parentTitle"
                                        [position]="'absolute'" [selectedContent]="item" [commentType]="'comment'"
                                        [parentEntity]="'SPEC'"
                                        placeHolder="Add a Comment"></xnode-add-comment-overlay-panel>
                                </p-overlayPanel>
                                <img src="../assets/comment.svg" class="pointer" alt="comment"
                                    (click)="op.toggle($event)"
                                    [style.display]="showCommentIcon && seletedMainIndex == mainIndex && selecteedSubIndex == i ? 'block' : 'none'">
                                <i class="pi pi-eye pointer ml-2" style="color:#0991c6" *ngIf="showCommentIcon"
                                    (click)="openCommentSection()"></i>
                                <img src="../assets/add-task.svg" class="pointer ml-2" (click)="op1.toggle($event)"
                                    [style.display]="showCommentIcon && seletedMainIndex == mainIndex && selecteedSubIndex == i ? 'block' : 'none'">
                                <p-overlayPanel #op1 appendTo="body">
                                    <xnode-add-task (closeOverlay)="op1.toggle(false)" [selectedContent]="item"
                                        [users]="users" placeHolder="Add a Task" [parentEntity]="'SPEC'"
                                        [parentTitle]="parentTitle" [specItem]="specItem"></xnode-add-task>
                                </p-overlayPanel>
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="isString(item.content)">
                    <div class="flex col-12 p-0"
                        (mouseover)="showCommentIcon = true;seletedMainIndex=mainIndex;selecteedSubIndex =mainIndex "
                        (mouseleave)="showCommentIcon = false">
                        <div class="col-10 p-0">
                            <p class="m-0 pb-1 line-height-3">
                                <span class="sub-content font-normal text-base">
                                    {{item?.content}}
                                </span>
                            </p>
                        </div>
                        <div class="col-1 p-0 flex  align-items-start justify-content-center">
                            <p-overlayPanel #op (onHide)="showCommentIcon=false"
                                (onHide)="commentOverlayPanelOpened=false">
                                <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="users"
                                    (closeOverlay)="op.toggle(false)" [parentTitle]="parentTitle"
                                    [position]="'absolute'" [selectedContent]="item" placeHolder="Add a Comment"
                                    [parentEntity]="'SPEC'" [commentType]="'comment'" [specItem]="specItem"
                                    [parentId]="specItem.id"></xnode-add-comment-overlay-panel>
                            </p-overlayPanel>
                            <img src="../assets/comment.svg" class="pointer" alt="comment"
                                (click)="op.toggle($event);commentOverlayPanelOpened=true;saveSecInLocal()"
                                *ngIf="(showCommentIcon || commentOverlayPanelOpened) ">
                            <i class="pi pi-eye pointer ml-2" style="color:#0991c6"
                                *ngIf="showCommentIcon || commentOverlayPanelOpened" (click)="openCommentSection()"></i>
                            <img src="../assets/add-task.svg" class="pointer ml-2"
                                (click)="op1.toggle($event);commentOverlayPanelOpened=true;saveSecInLocal()"
                                *ngIf="(showCommentIcon || commentOverlayPanelOpened) ">
                            <p-overlayPanel #op1 appendTo="body" (onHide)="showCommentIcon=false"
                                (onHide)="commentOverlayPanelOpened=false">
                                <xnode-add-task (closeOverlay)="op1.toggle(false)" [users]="users"
                                    placeHolder="Add a Task" [parentTitle]="parentTitle" [position]="'absolute'"
                                    [selectedContent]="item" placeHolder="Add a Comment" [parentEntity]="'SPEC'"
                                    [specItem]="specItem" [parentId]="specItem.id"></xnode-add-task>
                            </p-overlayPanel>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <ng-template #obj>
            <p [ngClass]="{'my-3 text-xl':isArray(content)==false}">{{content.title}}</p>
            <div class="array" *ngIf="isArray(content.content)">
                <div *ngFor="let subItem of content.content; let i=index " class="pl-4">
                    <div class="flex col-12 p-0 ">
                        <div class="col-10 p-0">
                            <p class="m-0 flex flex-wrap pb-1 line-height-3">
                                <span class="sub-title text-base font-medium"
                                    *ngFor="let word of subItem?.title?.split(' '); index as i" class="mr-1"
                                    [innerHTML]="word | highlight: searchTerm">
                                </span>
                                :
                                <span class="sub-content font-normal text-base"
                                    *ngFor="let word of subItem?.content?.split(' '); index as i" class="mr-1"
                                    [innerHTML]="word | highlight: searchTerm">
                                </span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="isString(content.content)">
                <div class="flex col-12 p-0">
                    <div class="col-10 p-0">
                        <p class="m-0 pb-1 line-height-3">
                            <span class="sub-content font-normal text-base">
                                {{content.content}}
                            </span>
                        </p>
                    </div>
                </div>
            </div>
        </ng-template>
    </div>
</div>