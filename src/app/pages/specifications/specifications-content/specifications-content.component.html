<div class="spec-body">
    <xnode-expand-specification *ngIf="specExpanded" [dataToExpand]="dataToExpand"
        (dataFlowEmitter)="expandComponent($event)"></xnode-expand-specification>
    <div *ngIf="!specExpanded">
        <div class="flex justify-content-center  mb-3" *ngFor="let item of specItemList;let i = index;">
            <div class="intro-grid" *ngIf="!item.content" [id]="item.title">
                <div class="text-4xl font-semibold">{{item.parentIndex + ' ' + item.title}}</div>
                <div class="flex align-items-center spec-status">
                    <p class="text-sm font-medium">Published on {{item.created_on | date: 'MMM d, y'}}</p>
                    <i class="pi pi-circle-fill pl-3 pr-3"></i>
                    <p class="text-sm font-medium">Updated on {{item.modified_on | date: 'MMM d, y'}}</p>
                    <i class="pi pi-circle-fill pl-3 pr-3"></i>
                    <p class="text-sm font-medium">3 mins read</p>
                </div>
                <div class="flex mt-2">
                    <div class="p-1 pl-3 pr-3 bg-white mr-2 border-round-2xl text-sm font-medium tag-text-color">
                        #{{app_name}}
                    </div>
                </div>
                <div class="flex mt-3 author align-items-center">
                    <i class="pi pi-circle-fill text-3xl mr-3"></i>
                    <div class="text-lg">
                        By {{item.modified_by}}
                    </div>
                </div>
                <img [src]="getMeBanner(item)" alt="banner" class="mt-3 w-full">
            </div>
            <div [ngClass]="!item?.collapsed ? 'sctions-grid relative' : 'sctions-grid-full relative'"
                *ngIf="item.content" [id]="item.title" #contentContainer>
                <h3 class="m-0 pb-2 text-2xl font-bold ">{{item.parentIndex+ ' '+ item.title}}</h3>
                <p-button (click)="onClickSeeMore(item,i)" label="See More" *ngIf="!item?.collapsed"
                    styleClass="p-button-rounded p-button-outlined see-more-button"
                    class="absolute bottom-0 right-0 mr-2 mb-2 z-1"></p-button>
                <div class="w-full" *ngIf="item.contentType ==='paragraph'">
                    <div *ngIf=" isArray(item); else notArray">
                        <ul *ngFor="let subItem of item.content">
                            <li>
                                <p class="m-0 pb-1"><span class="sub-title text-base font-medium">{{subItem.title}}
                                    </span>
                                    : <span class="sub-content font-normal text-base"
                                        *ngIf="isObject(subItem.content); else contentBlock">
                                        <span *ngFor="let element of subItem.content">
                                            <span class="sub-content font-normal text-base"
                                                *ngFor="let pair of element | objectToArray">
                            <li>
                                <span class="sub-content font-normal text-base">
                                    {{ pair.key }} : {{ pair.value }}
                                </span>
                            </li>
                            </span>
                            </span>
                            </span>
                            <ng-template #contentBlock>
                                <span class="sub-content font-normal text-base">{{subItem.content}}</span>
                            </ng-template>
                            </p>
                            </li>
                        </ul>
                    </div>
                    <ng-template #notArray>
                        <div class="flex content text-base font-normal">
                            {{item.content}}
                        </div>
                    </ng-template>
                </div>
                <div *ngIf="item.contentType==='iframe'" class=" h-vh">
                    <div class="flex justify-content-between align-items-center">
                        <h1>Dashboard</h1>
                        <img src="./assets/spec-minimize.svg" alt="container"
                            (click)="expandComponent({'dashboard':true})" class="expnad-icon pointer">
                    </div>
                    <iframe id="myIframe" [src]="iframeSrc" class="h-full w-full pl-1 pr-1" title="Template Builder">
                    </iframe>
                </div>
                <div *ngIf="item.contentType ==='table'">
                    <p-table [columns]="setColumnsToTheTable(item.content)" [value]="item.content">
                        <ng-template pTemplate="header" let-columns>
                            <tr>
                                <th *ngFor="let col of columns">
                                    {{ col.header }}
                                </th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-rowData let-columns="columns">
                            <tr>
                                <td *ngFor="let col of columns">
                                    {{ rowData[col.field] }}
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
                <div *ngIf="item.contentType ==='list'">
                    <span class="sub-content font-normal text-base" *ngIf="isObject(item.content); else contentBlock">
                        <span *ngFor="let element of item.content">
                            <span class="sub-content font-normal text-base"
                                *ngFor="let pair of element | objectToArray">
                                <li *ngIf="isObject(element) else elementblock">
                                    <span class="sub-content font-normal text-base">
                                        {{ pair.key }} : {{ pair.value }}
                                    </span>
                                </li>
                                <ng-template #elementblock>
                                    <span class="sub-content font-normal text-base">{{element}}</span>
                                </ng-template>
                            </span>
                        </span>
                    </span>
                    <ng-template #contentBlock>
                        <ul *ngFor="let subItem of item.content">
                            <li>
                                <p class="m-0 pb-1"> <span class="sub-content font-normal text-base">{{subItem}}</span>
                                </p>
                            </li>
                        </ul>
                    </ng-template>
                </div>
                <div *ngIf="item.contentType ==='header-list'">
                    <ul *ngFor="let subItem of item.content">
                        <li>
                            <p class="m-0 pb-1"><span class="sub-title text-base font-medium">{{subItem.title}} </span>
                                : <span class="sub-content font-normal text-base">{{subItem.content.Description}}</span>
                            </p>
                        </li>
                    </ul>
                </div>
                <div *ngIf="item.contentType ==='data-model'" class="h-vh">
                    <xnode-data-model-common (dataFlowEmitter)="expandComponent($event)"></xnode-data-model-common>
                </div>
                <div *ngIf="item.contentType ==='x-flows'" class="h-vh p-2">
                    <xnode-bpmn-common (dataFlowEmitter)="expandComponent($event)"></xnode-bpmn-common>
                </div>
                <!-- <div *ngIf="item.contentType ==='json'" class="h-auto overflow-auto">
                    <pre>{{ item.content | json }}</pre>
                </div> -->
                <div *ngIf="item.contentType ==='data-dictionary'">
                    <h4 class="m-0 pb-3">{{item.title}}</h4>
                    <ul *ngFor="let subItem of item.content">
                        <li>
                            <p class="m-0 pb-1"><span class="sub-title text-base font-medium">{{subItem.title}} </span>
                                : <span class="sub-content font-normal text-base">{{subItem.content.Description}}</span>
                            </p>
                        </li>
                    </ul>
                </div>
                <div *ngIf="item.contentType ==='OpenAPI'">
                    <div class="flex col-12 justify-content-between align-items-center">
                        <h4 class="m-0 ">Swagger API</h4>
                        <img src="./assets/spec-minimize.svg" alt="container"
                            (click)="expandComponent({'swagger':true})" class="expnad-icon pointer">
                    </div>
                    <div id="openapi-ui-spec" class="openapi-spec mt-2"></div>
                </div>
                <div *ngIf="item.contentType==='iframe'" class=" h-vh">
                    <iframe id="myIframe" [src]="iframeSrc" class="h-full w-full pl-1 pr-1" title="Template Builder">
                    </iframe>
                </div>
                <div *ngIf="item.contentType ==='table'">
                    <p-table [columns]="setColumnsToTheTable(item.content)" [value]="item.content">
                        <ng-template pTemplate="header" let-columns>
                            <tr>
                                <th *ngFor="let col of columns">
                                    {{ col.header }}
                                </th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-rowData let-columns="columns">
                            <tr>
                                <td *ngFor="let col of columns">
                                    {{ rowData[col.field] }}
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
                <div *ngIf="item.contentType ==='list'">
                    <ul *ngFor="let subItem of item.content">
                        <li>
                            <p class="m-0 pb-1"> <span class="sub-content font-normal text-base">{{subItem}}</span></p>
                        </li>
                    </ul>
                </div>
                <div *ngIf="item.contentType ==='header-list'">
                    <ul *ngFor="let subItem of item.content">
                        <li>
                            <p class="m-0 pb-1"><span class="sub-title text-base font-medium">{{subItem.title}} </span>
                                : <span class="sub-content font-normal text-base">{{subItem.content.Description}}</span>
                            </p>
                        </li>
                    </ul>
                </div>
                <div *ngIf="item.contentType ==='data-model'" class="h-vh">
                    <xnode-data-model-common></xnode-data-model-common>
                </div>
                <div *ngIf="item.contentType ==='x-flows'" class="h-vh">
                    <xnode-bpmn-common></xnode-bpmn-common>
                </div>
                <div *ngIf="item.contentType ==='json'" class="h-auto overflow-auto">
                    <div *ngIf="item?.content[0]?.title ==='tables'; else elsejsonBlock">
                        <div class="flex justify-content-end my-2 mr-2">
                            <i class="pi pi-code pointer mr-2" pTooltip="Json view" (click)="checkedToggle(false)"></i>
                            <i class="pi pi-table pointer ml-2" pTooltip="Table view" (click)="checkedToggle(true)"></i>
                        </div>
                        <div *ngIf="checked; else elsejson">
                            <p-table *ngFor="let table of item?.content[0]?.content"
                                [columns]="setColumnsToTheTable(table.columns)"
                                [value]="setColumnsToTheTable(table.columns)">
                                <ng-template pTemplate="caption">
                                    <h4>{{ table.tableName | camelToTitle }}</h4>
                                </ng-template>
                                <ng-template pTemplate="header" let-columns>
                                    <tr>
                                        <th *ngFor="let col of columns">
                                            {{ col.header | camelToTitle }}
                                        </th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-columns="columns">
                                    <tr>
                                        <td *ngFor="let col of columns">
                                            <span
                                                *ngIf="isObject(col.value);else field">{{returnValues(col.value)}}</span>
                                            <ng-template #field>
                                                {{ col.value }}
                                            </ng-template>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                        <ng-template #elsejson>
                            <pre>{{ item.content | json }}</pre>
                        </ng-template>
                    </div>
                    <ng-template #elsejsonBlock>
                        <div *ngIf="checked; else jsonBlock">
                            <div class="flex justify-content-end my-2 mr-2">
                                <i class="pi pi-code pointer mr-2" pTooltip="Json view"
                                    (click)="checkedToggle(false)"></i>
                                <i class="pi pi-table pointer ml-2" pTooltip="Table view"
                                    (click)="checkedToggle(true)"></i>
                            </div>
                            <span *ngIf="item?.title=='Data Quality Checks'">
                                <div *ngFor="let subitem of dataQualityData">
                                    <p-table [columns]="setColumnsToTheTable(subitem.content)" class="my-2"
                                        [value]="subitem.content">
                                        <ng-template pTemplate="caption">
                                            <h4>{{ subitem?.header | camelToTitle }}</h4>
                                        </ng-template>
                                        <ng-template pTemplate="header" let-columns>
                                            <tr>
                                                <th *ngFor="let col of subitem.title">
                                                    {{ col }}
                                                </th>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-rowData let-columns="columns">
                                            <tr>
                                                <td *ngFor="let col of subitem.content">
                                                    {{ rowData }}
                                                </td>
                                            </tr>
                                        </ng-template>
                                    </p-table>
                                </div>
                            </span>
                            <p-table *ngIf="item.title == 'User Interfaces'" [value]="bodyData">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th *ngFor="let header of userInterfaceheaders">{{ header| camelToTitle }}</th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-rowData>
                                    <tr>
                                        <td *ngFor="let header of userInterfaceheaders">{{ rowData[header] }}</td>
                                    </tr>
                                </ng-template>
                            </p-table>
                            <p-table *ngIf="item.title == 'Business Rules' || item.title=='Functional Dependencies'"
                                [columns]="setColumnsToTheTable(item?.content)" [value]="item?.content">
                                <ng-template pTemplate="body" let-content>
                                    <tr>
                                        <td>{{ content }}</td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                        <ng-template #jsonBlock>
                            <div class="flex justify-content-end my-2 mr-2">
                                <i class="pi pi-code pointer mr-2" pTooltip="Json view"
                                    (click)="checkedToggle(false)"></i>
                                <i class="pi pi-table pointer ml-2" pTooltip="Table view"
                                    (click)="checkedToggle(true)"></i>
                            </div>
                            <pre>{{ item.content | json }}</pre>
                        </ng-template>
                    </ng-template>
                </div>
                <div *ngIf="item.contentType ==='data-dictionary'">
                    <h4 class="m-0 pb-3">{{item.title}}</h4>
                    <ul *ngFor="let subItem of item.content">
                        <li>
                            <p class="m-0 pb-1"><span class="sub-title text-base font-medium">{{subItem.title}} </span>
                                : <span class="sub-content font-normal text-base">{{subItem.content.Description}}</span>
                            </p>
                        </li>
                    </ul>
                </div>
                <div class="gradientback" *ngIf="!item?.collapsed">
                </div>
            </div>
        </div>
    </div>
</div>