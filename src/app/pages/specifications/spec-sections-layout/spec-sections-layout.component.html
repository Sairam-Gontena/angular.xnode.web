<div *ngFor="let content of content; let cIndex = index" class="mt-2">
  <div [ngClass]="
      !content?.collapsed
        ? 'sctions-grid relative'
        : 'sctions-grid-full relative'
    " id="{{ content?.id }}" #contentContainer>
    <div class="flex justify-content-between flex-wrap relative w-full">
      <div class="flex align-items-center justify-content-between w-full">
        <h3 class="m-0 pb-2 text-2xl font-bold" [innerHTML]="
            sectionIndex + 1 + '.' + (cIndex + 1) + ' ' + content.title
              | highlight : searchTerm
          "></h3>
        <div *ngIf="checkExpandSpecSections(content.title)">
          <span *ngIf="
              content.title == 'Annexures' ||
                content.title == 'User Interfaces' ||
                content.title == 'Functional Dependencies' ||
                content.title == 'Business Rules';
              else elseExpand
            ">
            <img src="./assets/spec-minimize.svg" alt="container" (click)="expandComponent.emit(content)"
              class="expnad-icon pointer" *ngIf="checked && selectedContent === sectionIndex" class="ml-3"
              style="width: 25px" />
          </span>
          <ng-template #elseExpand>
            <img src="./assets/spec-minimize.svg" alt="container" (click)="expandComponent.emit(content)"
              *ngIf="!readOnly" class="expnad-icon pointer" />
          </ng-template>
        </div>
      </div>
    </div>
    <p-button (click)="onClickSeeMore.emit({ item: specItem, content: content })" label="See More"
      *ngIf="!content?.collapsed && !readOnly" styleClass="p-button-outlined see-more-button" [rounded]="true"
      class="absolute bottom-0 right-0 mr-2 mb-2 z-1"></p-button>
    <p-button (click)="onClickSeeLess.emit({ item: specItem, content: content })" label="See Less"
      *ngIf="content?.collapsed && !readOnly" styleClass="p-button-outlined see-more-button" [rounded]="true"
      class="absolute bottom-0 right-0 mr-2 mb-2"></p-button>
    <div *ngIf="content.title === 'Usecases' || content.title === 'Use Cases'">
      <div class="grid" (mouseover)="usecaseshowCommentIcon = true" (mouseleave)="usecaseshowCommentIcon = false">
        <div class="col-12 text-right p-0">
          <p-overlayPanel #usecaseop (onHide)="
              usecasePanelOpened = false; usecaseshowCommentIcon = false
            ">
            <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="usersList" *ngIf="usecasePanelOpened"
              (closeOverlay)="
                usecaseop.toggle(false); usecasePanelOpened = false
              " [position]="'absolute'" [selectedContent]="content" placeHolder="Add a Comment"
              [commentType]="'comment'" [parentEntity]="'SPEC'" [parentId]="specItem.id"
              [specItem]="specItem"></xnode-add-comment-overlay-panel>
          </p-overlayPanel>
          <img src="../assets/comment.svg" class="pointer comment-msg pt-2" alt="comment"
            (click)="usecaseop.toggle($event); usecasePanelOpened = true" (mouseleave)="usecaseshowCommentIcon = false"
            [ngClass]="
              usecaseshowCommentIcon || usecasePanelOpened
                ? 'opacity-100'
                : 'opacity-0'
            " />
        </div>
        <div [ngClass]="{
            'common-spec-table-navi-menu':
              isSideMenuOpened && isDockedNaviOpened,
            'common-spec-table':
              !isSideMenuOpened &&
              !isDockedNaviOpened &&
              !isCommnetsPanelOpened,
            'common-spec-table-cr-menu':
              isCommnetsPanelOpened && isSideMenuOpened
          }" class="col-12">
          <xnode-common-usecases [searchTerm]="searchTerm" [users]="usersList" [specItem]="specItem"
            [useCases]="useCases"></xnode-common-usecases>
        </div>
      </div>
    </div>
    <div *ngIf="content.title === 'User Interface Design'">
      <div class="flex justify-content-between align-items-center">
        <h1 class="my-1">Dashboard</h1>
      </div>
      <div class="grid" (mouseover)="userinterfaceShowCommentIcon = true"
        (mouseleave)="userinterfaceShowCommentIcon = false">
        <div class="col-12 text-right p-0">
          <p-overlayPanel #useinterfaceop (onHide)="
              userinterfacePanelOpened = false;
              userinterfaceShowCommentIcon = false
            ">
            <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="usersList" *ngIf="userinterfacePanelOpened"
              (closeOverlay)="
                useinterfaceop.toggle(false); userinterfacePanelOpened = false
              " [position]="'absolute'" [selectedContent]="content" placeHolder="Add a Comment"
              [commentType]="'comment'" [parentEntity]="'SPEC'" [parentId]="specItem.id"
              [specItem]="specItem"></xnode-add-comment-overlay-panel>
          </p-overlayPanel>
          <img src="../assets/comment.svg" class="pointer comment-msg pt-2" alt="comment" (click)="
              useinterfaceop.toggle($event); userinterfacePanelOpened = true
            " [ngClass]="
              userinterfaceShowCommentIcon || userinterfacePanelOpened
                ? 'opacity-100'
                : 'opacity-0'
            " (mouseleave)="userinterfaceShowCommentIcon = false" />
        </div>
        <div class="col-12">
          <iframe id="myIframe" [src]="iframeSrc" class="h-vh w-full" title="Template Builder">
          </iframe>
        </div>
      </div>
    </div>
    <div *ngIf="content.title === 'Data Management Persistence'">
      <div class="grid" (mouseover)="dataManagementCommentIcon = true" (mouseleave)="dataManagementCommentIcon = false">
        <div class="col-12 text-right p-0">
          <p-overlayPanel #dataManagementop (onHide)="
              dataManagementPanelOpened = false;
              dataManagementCommentIcon = false
            ">
            <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="usersList" *ngIf="dataManagementPanelOpened"
              (closeOverlay)="
                dataManagementop.toggle(false);
                dataManagementPanelOpened = false
              " [position]="'absolute'" [selectedContent]="content" placeHolder="Add a Comment"
              [commentType]="'comment'" [parentEntity]="'SPEC'" [parentId]="specItem.id"
              [specItem]="specItem"></xnode-add-comment-overlay-panel>
          </p-overlayPanel>
          <img src="../assets/comment.svg" class="pointer comment-msg pt-2" alt="comment" (click)="
              dataManagementop.toggle($event); dataManagementPanelOpened = true
            " (mouseleave)="dataManagementCommentIcon = false" [ngClass]="
              dataManagementCommentIcon || dataManagementPanelOpened
                ? 'opacity-100'
                : 'opacity-0'
            " />
        </div>
        <div class="col-12">
          <xnode-data-model-common (dataFlowEmitter)="expandComponent.emit(content)"
            [item]="content"></xnode-data-model-common>
        </div>
      </div>
    </div>
    <div *ngIf="content.title === 'Workflows'">
      <div class="grid" (mouseover)="workflowshowCommentIcon = true" (mouseleave)="workflowshowCommentIcon = false">
        <div class="col-12 text-right p-0">
          <p-overlayPanel #workflowsop (onHide)="
              workflowPanelOpened = false; workflowshowCommentIcon = false
            ">
            <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="usersList" *ngIf="workflowPanelOpened"
              (closeOverlay)="
                workflowsop.toggle(false); workflowPanelOpened = false
              " [position]="'absolute'" [selectedContent]="content" placeHolder="Add a Comment"
              [commentType]="'comment'" [parentEntity]="'SPEC'" [parentId]="specItem.id"
              [specItem]="specItem"></xnode-add-comment-overlay-panel>
          </p-overlayPanel>
          <img src="../assets/comment.svg" class="pointer comment-msg pt-2" alt="comment"
            (click)="workflowsop.toggle($event); workflowPanelOpened = true"
            (mouseleave)="workflowshowCommentIcon = false" [ngClass]="
              workflowshowCommentIcon || workflowPanelOpened
                ? 'opacity-100'
                : 'opacity-0'
            " />
        </div>
        <div class="col-12">
          <xnode-bpmn-common (dataFlowEmitter)="expandComponent.emit(content)" [item]="content"></xnode-bpmn-common>
        </div>
      </div>
    </div>
    <div *ngIf="content.title === 'Data Dictionary'">
      <div class="flex justify-content-end align-items-center my-2 mr-2" *ngIf="!readOnly">
        <i class="pi pi-code pointer mr-2" pTooltip="Json view" (click)="checkedToggle('json', specItem, content)"></i>
        <i class="pi pi-table pointer ml-2" pTooltip="Table view"
          (click)="checkedToggle('table', specItem, content)"></i>
      </div>
      <div class="grid" (mouseover)="dataDictionaryshowCommentIcon = true"
        (mouseleave)="dataDictionaryshowCommentIcon = false">
        <div class="col-12 py-0 text-right">
          <img src="../assets/comment.svg" class="pointer" alt="comment" (click)="
            businessRulesop.toggle($event); dataDictionaryPanelOpened = true;saveSecInLocal();
          " (mouseleave)="dataDictionaryshowCommentIcon = false"
            *ngIf="dataDictionaryshowCommentIcon || dataDictionaryPanelOpened" />
          <p-overlayPanel #businessRulesop (onHide)="
          dataDictionaryPanelOpened = false;
              dataDictionaryshowCommentIcon = false
            ">
            <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="usersList" *ngIf="dataDictionaryPanelOpened"
              (closeOverlay)="
                businessRulesop.toggle(false);
                dataDictionaryPanelOpened = false
              " [position]="'absolute'" [selectedContent]="content" placeHolder="Add a Comment"
              [commentType]="'comment'" [parentEntity]="'SPEC'" [parentId]="specItem.id"
              [specItem]="specItem"></xnode-add-comment-overlay-panel>
          </p-overlayPanel>
        </div>
        <div class="col-12">
          <div [ngClass]="{
            'common-spec-table-menu': isSideMenuOpened,
            'common-spec-table-navi-menu': isSideMenuOpened && isDockedNaviOpened,
            'common-spec-table':
              !isSideMenuOpened && !isDockedNaviOpened && !isCommnetsPanelOpened,
            'common-spec-table-cr-menu': isCommnetsPanelOpened && isSideMenuOpened
          }" class="common-spec-table" *ngIf="content.showTable; else elsejson">
            <xnode-common-spec-table [searchTerm]="searchTerm" [users]="usersList" [specItem]="specItem"
              [content]="content.content"></xnode-common-spec-table>
          </div>
          <ng-template #elsejson>
            <div class="grid" (mouseover)="dataDictionaryshowCommentIcon = true"
              (mouseleave)="dataDictionaryshowCommentIcon = false">
              <div class="col-12">
                <pre [innerHTML]="content.content | json | highlight : searchTerm"
                  style="white-space: pre-wrap; overflow: auto"></pre>
              </div>
            </div>
          </ng-template>
        </div>
      </div>

    </div>
    <div *ngIf="content.title === 'Business Rules'">
      <div class="flex justify-content-end align-items-center my-2 mr-2" *ngIf="!readOnly">
        <i class="pi pi-code pointer mr-2" pTooltip="Json view" (click)="checkedToggle('json', specItem, content)"></i>
        <i class="pi pi-table pointer ml-2" pTooltip="Table view"
          (click)="checkedToggle('table', specItem, content)"></i>
      </div>
      <div class="grid" (mouseover)="businessRulesshowCommentIcon = true"
        (mouseleave)="businessRulesshowCommentIcon = false">
        <div class="col-12 py-0 text-right">
          <img src="../assets/comment.svg" class="pointer" alt="comment" (click)="
            businessRulesop.toggle($event); businessRulesPanelOpened = true;saveSecInLocal();
          " (mouseleave)="businessRulesshowCommentIcon = false"
            *ngIf="businessRulesshowCommentIcon || businessRulesPanelOpened" />
          <p-overlayPanel #businessRulesop (onHide)="
              businessRulesPanelOpened = false;
              businessRulesshowCommentIcon = false
            ">
            <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="usersList" *ngIf="businessRulesPanelOpened"
              (closeOverlay)="
                businessRulesop.toggle(false);
                businessRulesPanelOpened = false
              " [position]="'absolute'" [selectedContent]="content" placeHolder="Add a Comment"
              [commentType]="'comment'" [parentEntity]="'SPEC'" [parentId]="specItem.id"
              [specItem]="specItem"></xnode-add-comment-overlay-panel>
          </p-overlayPanel>
        </div>
        <div class="col-12">
          <div [ngClass]="{
            'common-spec-table-menu': isSideMenuOpened,
            'common-spec-table-navi-menu': isSideMenuOpened && isDockedNaviOpened,
            'common-spec-table':
              !isSideMenuOpened && !isDockedNaviOpened && !isCommnetsPanelOpened,
            'common-spec-table-cr-menu': isCommnetsPanelOpened && isSideMenuOpened
          }" class="common-spec-table" *ngIf="content.showTable; else elsejson">
            <xnode-common-spec-table [searchTerm]="searchTerm" [users]="usersList" [specItem]="specItem"
              [content]="content.content"></xnode-common-spec-table>
          </div>
          <ng-template #elsejson>
            <div class="grid" (mouseover)="businessRulesshowCommentIcon = true"
              (mouseleave)="businessRulesshowCommentIcon = false">
              <div class="col-12">
                <pre [innerHTML]="content.content | json | highlight : searchTerm"
                  style="white-space: pre-wrap; overflow: auto"></pre>
              </div>
            </div>
          </ng-template>
        </div>
      </div>

    </div>

    <div *ngIf="content.title === 'Functional Dependencies'">
      <div class="flex justify-content-end align-items-center my-2 mr-2" *ngIf="!readOnly">
        <i class="pi pi-code pointer mr-2" pTooltip="Json view" (click)="checkedToggle('json', specItem, content)"></i>
        <i class="pi pi-table pointer ml-2" pTooltip="Table view"
          (click)="checkedToggle('table', specItem, content)"></i>
      </div>
      <div class="grid" (mouseover)="functionalDependenciesshowCommentIcon = true"
        (mouseleave)="functionalDependenciesshowCommentIcon = false">
        <div class="col-12 py-0 text-right">
          <img src="../assets/comment.svg" class="pointer" alt="comment" (click)="
          functionalDepedencyop.toggle($event); functionalDepedencyPanelOpened = true;saveSecInLocal();
          " (mouseleave)="functionalDependenciesshowCommentIcon = false"
            *ngIf="functionalDependenciesshowCommentIcon || functionalDepedencyPanelOpened" />
          <p-overlayPanel #functionalDepedencyop (onHide)="
          functionalDepedencyPanelOpened = false;
              functionalDependenciesshowCommentIcon = false
            ">
            <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="usersList"
              *ngIf="functionalDepedencyPanelOpened" (closeOverlay)="
              functionalDepedencyop.toggle(false);
                functionalDepedencyPanelOpened = false
              " [position]="'absolute'" [selectedContent]="content" placeHolder="Add a Comment"
              [commentType]="'comment'" [parentEntity]="'SPEC'" [parentId]="specItem.id"
              [specItem]="specItem"></xnode-add-comment-overlay-panel>
          </p-overlayPanel>
        </div>
        <div class="col-12">
          <div [ngClass]="{
            'common-spec-table-menu': isSideMenuOpened,
            'common-spec-table-navi-menu': isSideMenuOpened && isDockedNaviOpened,
            'common-spec-table':
              !isSideMenuOpened && !isDockedNaviOpened && !isCommnetsPanelOpened,
            'common-spec-table-cr-menu': isCommnetsPanelOpened && isSideMenuOpened
          }" class="common-spec-table" *ngIf="content.showTable; else elsejson">
            <xnode-common-spec-table [searchTerm]="searchTerm" [users]="usersList" [specItem]="specItem"
              [content]="content.content"></xnode-common-spec-table>
          </div>
          <ng-template #elsejson>
            <div class="grid" (mouseover)="functionalDependenciesshowCommentIcon = true"
              (mouseleave)="functionalDependenciesshowCommentIcon = false">
              <div class="col-12">
                <pre [innerHTML]="content.content | json | highlight : searchTerm"
                  style="white-space: pre-wrap; overflow: auto"></pre>
              </div>
            </div>
          </ng-template>
        </div>
      </div>

    </div>


    <div *ngIf="content.title === 'User Interfaces'">
      <div class="flex justify-content-end align-items-center my-2 mr-2" *ngIf="!readOnly">
        <i class="pi pi-code pointer mr-2" pTooltip="Json view" (click)="checkedToggle('json', specItem, content)"></i>
        <i class="pi pi-table pointer ml-2" pTooltip="Table view"
          (click)="checkedToggle('table', specItem, content)"></i>
      </div>
      <div class="grid" (mouseover)="userInterfaceshowCommentIcon = true"
        (mouseleave)="userInterfaceshowCommentIcon = false">
        <div class="col-12 py-0 text-right">
          <img src="../assets/comment.svg" class="pointer" alt="comment" (click)="
          functionalDepedencyop.toggle($event); userInterfacePanelOpened = true;saveSecInLocal();
          " (mouseleave)="userInterfaceshowCommentIcon = false"
            *ngIf="userInterfaceshowCommentIcon || userInterfacePanelOpened" />
          <p-overlayPanel #functionalDepedencyop (onHide)="
          userInterfacePanelOpened = false;
          userInterfaceshowCommentIcon = false
            ">
            <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="usersList" *ngIf="userInterfacePanelOpened"
              (closeOverlay)="
              functionalDepedencyop.toggle(false);
              userInterfacePanelOpened = false
              " [position]="'absolute'" [selectedContent]="content" placeHolder="Add a Comment"
              [commentType]="'comment'" [parentEntity]="'SPEC'" [parentId]="specItem.id"
              [specItem]="specItem"></xnode-add-comment-overlay-panel>
          </p-overlayPanel>
        </div>
        <div class="col-12">
          <div [ngClass]="{
            'common-spec-table-menu': isSideMenuOpened,
            'common-spec-table-navi-menu': isSideMenuOpened && isDockedNaviOpened,
            'common-spec-table':
              !isSideMenuOpened && !isDockedNaviOpened && !isCommnetsPanelOpened,
            'common-spec-table-cr-menu': isCommnetsPanelOpened && isSideMenuOpened
          }" class="common-spec-table" *ngIf="content.showTable; else elsejson">
            <xnode-common-spec-table [searchTerm]="searchTerm" [users]="usersList" [specItem]="specItem"
              [content]="content.content"></xnode-common-spec-table>
          </div>
          <ng-template #elsejson>
            <div class="grid" (mouseover)="userInterfaceshowCommentIcon = true"
              (mouseleave)="userInterfaceshowCommentIcon = false">
              <div class="col-12">
                <pre [innerHTML]="content.content | json | highlight : searchTerm"
                  style="white-space: pre-wrap; overflow: auto"></pre>
              </div>
            </div>
          </ng-template>
        </div>
      </div>

    </div>

    <div *ngIf="content.title === 'Annexures'">
      <div class="flex justify-content-end align-items-center my-2 mr-2" *ngIf="!readOnly">
        <i class="pi pi-code pointer mr-2" pTooltip="Json view" (click)="checkedToggle('json', specItem, content)"></i>
        <i class="pi pi-table pointer ml-2" pTooltip="Table view"
          (click)="checkedToggle('table', specItem, content)"></i>
      </div>
      <div class="grid" (mouseover)="AnnexureshowCommentIcon = true" (mouseleave)="AnnexureshowCommentIcon = false">
        <div class="col-12 py-0 text-right">
          <img src="../assets/comment.svg" class="pointer" alt="comment" (click)="
          functionalDepedencyop.toggle($event); AnnexuresPanelOpened = true;saveSecInLocal();
          " (mouseleave)="AnnexureshowCommentIcon = false" *ngIf="AnnexureshowCommentIcon || AnnexuresPanelOpened" />
          <p-overlayPanel #functionalDepedencyop (onHide)="
          AnnexuresPanelOpened = false;
          AnnexureshowCommentIcon = false
            ">
            <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="usersList" *ngIf="AnnexuresPanelOpened"
              (closeOverlay)="
              functionalDepedencyop.toggle(false);
              AnnexuresPanelOpened = false
              " [position]="'absolute'" [selectedContent]="content" placeHolder="Add a Comment"
              [commentType]="'comment'" [parentEntity]="'SPEC'" [parentId]="specItem.id"
              [specItem]="specItem"></xnode-add-comment-overlay-panel>
          </p-overlayPanel>
        </div>
        <div class="col-12">
          <div [ngClass]="{
            'common-spec-table-menu': isSideMenuOpened,
            'common-spec-table-navi-menu': isSideMenuOpened && isDockedNaviOpened,
            'common-spec-table':
              !isSideMenuOpened && !isDockedNaviOpened && !isCommnetsPanelOpened,
            'common-spec-table-cr-menu': isCommnetsPanelOpened && isSideMenuOpened
          }" class="common-spec-table" *ngIf="content.showTable; else elsejson">
            <xnode-common-spec-table [searchTerm]="searchTerm" [users]="usersList" [specItem]="specItem"
              [content]="content.content"></xnode-common-spec-table>
          </div>
          <ng-template #elsejson>
            <div class="grid" (mouseover)="AnnexureshowCommentIcon = true"
              (mouseleave)="AnnexureshowCommentIcon = false">
              <div class="col-12">
                <pre [innerHTML]="content.content | json | highlight : searchTerm"
                  style="white-space: pre-wrap; overflow: auto"></pre>
              </div>
            </div>
          </ng-template>
        </div>
      </div>

    </div>

    <div [ngClass]="{
        'common-spec-table-menu': isSideMenuOpened,
        'common-spec-table-navi-menu': isSideMenuOpened && isDockedNaviOpened,
        'common-spec-table':
          !isSideMenuOpened && !isDockedNaviOpened && !isCommnetsPanelOpened,
        'common-spec-table-cr-menu': isCommnetsPanelOpened && isSideMenuOpened
      }" *ngIf="content.title === 'Historical Data Load'">
      <xnode-common-spec-table *ngIf="selectedSpecItem?.title === 'Historical Data Load'" [searchTerm]="searchTerm"
        [users]="usersList" [specItem]="specItem" [content]="content.content"></xnode-common-spec-table>
    </div>
    <div *ngIf="content.title === 'User Personas' && isArray(content.content)">
      <div class="grid" (mouseover)="userpersonaShowCommentIcon = true"
        (mouseleave)="userpersonaShowCommentIcon = false">
        <div class="col-12 text-right p-0">
          <p-overlayPanel #userpersonaop (onHide)="
              usepersonaPanelOpened = false; userpersonaShowCommentIcon = false
            ">
            <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="usersList" *ngIf="usepersonaPanelOpened"
              (closeOverlay)="
                userpersonaop.toggle(false); usepersonaPanelOpened = false
              " [position]="'absolute'" [selectedContent]="content" placeHolder="Add a Comment"
              [commentType]="'comment'" [parentEntity]="'SPEC'" [parentId]="specItem.id"
              [specItem]="specItem"></xnode-add-comment-overlay-panel>
          </p-overlayPanel>
          <img src="../assets/comment.svg" class="pointer" alt="comment"
            (click)="userpersonaop.toggle($event); usepersonaPanelOpened = true"
            (mouseleave)="userpersonaShowCommentIcon = false" [ngClass]="
              userpersonaShowCommentIcon || usepersonaPanelOpened
                ? 'opacity-100'
                : 'opacity-0'
            " />
        </div>
        <div class="col-12">
          <div *ngFor="let persona of content.content" class="pb-3">
            <xnode-user-persona [searchTerm]="searchTerm" [content]="persona"></xnode-user-persona>
          </div>
        </div>
      </div>
    </div>
    <div [ngClass]="{
        'common-spec-table-menu': isSideMenuOpened,
        'common-spec-table-navi-menu': isSideMenuOpened && isDockedNaviOpened,
        'common-spec-table':
          !isSideMenuOpened && !isDockedNaviOpened && !isCommnetsPanelOpened,
        'common-spec-table-cr-menu': isCommnetsPanelOpened && isSideMenuOpened
      }" *ngIf="content.title === 'Glossary'">
      <xnode-common-spec-table *ngIf="selectedSpecItem?.title === 'Glossary'" [searchTerm]="searchTerm"
        [content]="content.content" [users]="usersList" [specItem]="specItem"></xnode-common-spec-table>
    </div>
    <div [ngClass]="{
        'common-spec-table-menu': isSideMenuOpened,
        'common-spec-table-navi-menu': isSideMenuOpened && isDockedNaviOpened,
        'common-spec-table':
          !isSideMenuOpened && !isDockedNaviOpened && !isCommnetsPanelOpened,
        'common-spec-table-cr-menu': isCommnetsPanelOpened && isSideMenuOpened
      }" *ngIf="content.title === 'Version Control'">
      <xnode-common-spec-table *ngIf="selectedSpecItem?.title === 'Version Control'" [searchTerm]="searchTerm"
        [content]="content.content" [users]="usersList" [specItem]="specItem"></xnode-common-spec-table>
    </div>
    <div [ngClass]="{
        'common-spec-table-menu': isSideMenuOpened,
        'common-spec-table-navi-menu': isSideMenuOpened && isDockedNaviOpened,
        'common-spec-table':
          !isSideMenuOpened && !isDockedNaviOpened && !isCommnetsPanelOpened,
        'common-spec-table-cr-menu': isCommnetsPanelOpened && isSideMenuOpened
      }" *ngIf="content.title === 'Error Handling'">
      <xnode-common-spec-table *ngIf="selectedSpecItem?.title === 'Error Handling'" [searchTerm]="searchTerm"
        [content]="content.content" [users]="usersList" [specItem]="specItem"></xnode-common-spec-table>
    </div>
    <div [ngClass]="{
        'common-spec-table-menu': isSideMenuOpened,
        'common-spec-table-navi-menu': isSideMenuOpened && isDockedNaviOpened,
        'common-spec-table':
          !isSideMenuOpened && !isDockedNaviOpened && !isCommnetsPanelOpened,
        'common-spec-table-cr-menu': isCommnetsPanelOpened && isSideMenuOpened
      }" *ngIf="content.title === 'Stakeholder Approvals'">
      <xnode-common-spec-table *ngIf="selectedSpecItem?.title === 'Stakeholder Approvals'" [users]="usersList"
        [searchTerm]="searchTerm" [specItem]="specItem" [content]="content.content"></xnode-common-spec-table>
    </div>
    <div *ngIf="content.title === 'QA Test Cases' && isArray(content.content)">
      <div class="grid" (mouseover)="qashowCommentIcon = true" (mouseleave)="qashowCommentIcon = false">
        <div class="col-12 text-right p-0">
          <p-overlayPanel #qaop (onHide)="qaPanelOpened = false; qashowCommentIcon = false">
            <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="usersList" *ngIf="qaPanelOpened"
              (closeOverlay)="qaop.toggle(false); qaPanelOpened = false" [position]="'absolute'"
              [selectedContent]="content" placeHolder="Add a Comment" [commentType]="'comment'" [parentEntity]="'SPEC'"
              [parentId]="specItem.id" [specItem]="specItem"></xnode-add-comment-overlay-panel>
          </p-overlayPanel>
          <img src="../assets/comment.svg" class="pointer" alt="comment"
            (click)="qaop.toggle($event); qaPanelOpened = true" (mouseleave)="qashowCommentIcon = false" [ngClass]="
              qashowCommentIcon || qaPanelOpened ? 'opacity-100' : 'opacity-0'
            " />
        </div>
        <div class="col-12">
          <div *ngFor="let subItem of content.content; let subIndex = index">
            <div *ngIf="
                subItem.title !== 'Sample Test Cases';
                else sampleTestCases
              ">
              <p class="m-0 pb-2">
                <span>
                  <div class="flex col-12 p-0" (mouseover)="
                      showCommentIcon = true;
                      seletedMainIndex = cIndex;
                      selecteedSubIndex = subIndex
                    " (mouseleave)="showCommentIcon = false">
                    <div class="col-11 p-0">
                      <span class="sub-title text-base font-medium"
                        [innerHTML]="subItem.title | highlight : searchTerm">
                      </span>
                      :
                      <span class="sub-content font-normal text-base"
                        [innerHTML]="subItem.content | highlight : searchTerm"></span>
                    </div>
                    <div class="col-1 p-0 flex align-items-start justify-content-center">
                      <p-overlayPanel #op (onHide)="commentOverlayPanelOpened = false">
                        <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="usersList" [parentEntity]="'SPEC'"
                          [parentId]="specItem.id" *ngIf="commentOverlayPanelOpened" (closeOverlay)="op.toggle(false)"
                          [position]="'absolute'" [selectedContent]="selectedContent" [commentType]="'comment'"
                          placeHolder="Add a Comment"></xnode-add-comment-overlay-panel>
                      </p-overlayPanel>
                      <img src="../assets/comment.svg" class="pointer" alt="comment" (click)="
                          op.toggle($event); commentOverlayPanelOpened = true
                        " *ngIf="
                          (showCommentIcon || commentOverlayPanelOpened) &&
                          seletedMainIndex &&
                          selecteedSubIndex
                        " />
                    </div>
                  </div>
                </span>
              </p>
            </div>
            <ng-template #sampleTestCases>
              <div *ngIf="isArray(subItem.content)">
                <h4 class="mb-2" [innerHTML]="subItem.title | highlight : searchTerm"></h4>
                <div *ngFor="
                    let testCase of subItem.content;
                    let lastItem = last;
                    let subIndex = index
                  ">
                  <p *ngFor="
                      let key of getTestCaseKeys(testCase);
                      let subSubIndex = index
                    " class="m-0 pb-2">
                    <span>
                      <div class="col-12 p-0 flex" (mouseover)="
                          showCommentIcon = true;
                          seletedMainIndex = cIndex;
                          selecteedSubIndex = subIndex;
                          selecteedSubSubIndex = subSubIndex
                        " (mouseleave)="showCommentIcon = false">
                        <div class="col-11 p-0">
                          <span class="sub-title text-base font-medium"
                            [innerHTML]="key | highlight : searchTerm"></span>
                          :
                          <span class="sub-content font-normal text-base"
                            [innerHTML]="testCase[key] | highlight : searchTerm"></span>
                        </div>
                        <div class="col-1 p-0 flex align-items-start justify-content-center">
                          <p-overlayPanel #op (onHide)="commentOverlayPanelOpened = false">
                            <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="usersList"
                              [parentEntity]="'SPEC'" [parentId]="specItem.id" *ngIf="commentOverlayPanelOpened"
                              (closeOverlay)="op.toggle(false)" [selectedContent]="selectedContent"
                              [commentType]="'comment'" placeHolder="Add a Comment"></xnode-add-comment-overlay-panel>
                          </p-overlayPanel>
                          <img src="../assets/comment.svg" class="pointer" alt="comment" (click)="
                              op.toggle($event);
                              commentOverlayPanelOpened = true
                            " *ngIf="
                              (showCommentIcon || commentOverlayPanelOpened) &&
                              seletedMainIndex == cIndex &&
                              selecteedSubIndex == subIndex &&
                              selecteedSubSubIndex == subSubIndex
                            " />
                        </div>
                      </div>
                    </span>
                  </p>
                  <ng-container *ngIf="!lastItem">
                    <hr class="mt-2 mb-2" />
                  </ng-container>
                </div>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </div>

    <div [ngClass]="{
        'common-spec-table-navi-menu': isSideMenuOpened && isDockedNaviOpened,
        'common-spec-table':
          !isSideMenuOpened && !isDockedNaviOpened && !isCommnetsPanelOpened,
        'common-spec-table-cr-menu': isCommnetsPanelOpened && isSideMenuOpened
      }" *ngIf="content.title === 'OpenAPI Spec'">
      <div class="flex col-12 justify-content-between align-items-center">
        <h4 class="m-0">Swagger API</h4>
      </div>
      <div class="grid" (mouseover)="openAPIShowCommentIcon = true" (mouseleave)="openAPIShowCommentIcon = false">
        <div class="col-12 text-right p-0">
          <p-overlayPanel #openAPIop (onHide)="
              openAPIPanelOpened = false; openAPIShowCommentIcon = false
            ">
            <xnode-add-comment-overlay-panel [width]="'w-30rem'" [users]="usersList" *ngIf="openAPIPanelOpened"
              (closeOverlay)="
                openAPIop.toggle(false); openAPIPanelOpened = false
              " [position]="'absolute'" [selectedContent]="content" placeHolder="Add a Comment"
              [commentType]="'comment'" [parentEntity]="'SPEC'" [parentId]="specItem.id"
              [specItem]="specItem"></xnode-add-comment-overlay-panel>
          </p-overlayPanel>
          <img src="../assets/comment.svg" class="pointer" alt="comment"
            (click)="openAPIop.toggle($event); openAPIPanelOpened = true" (mouseleave)="openAPIShowCommentIcon = false"
            [ngClass]="
              openAPIShowCommentIcon || openAPIPanelOpened
                ? 'opacity-100'
                : 'opacity-0'
            " />
        </div>
        <div class="col-12">
          <div id="openapi-ui-spec" class="openapi-spec mt-2"></div>
        </div>
      </div>
    </div>

    <div *ngIf="content.title === 'User Roles'">
      <xnode-user-roles [id]="content.id" [specId]="sectionIndex + 1 + '.' + (cIndex + 1)" [searchTerm]="searchTerm"
        [content]="content.content" [users]="usersList" [selectedContent]="selectedContent"
        [specItem]="specItem"></xnode-user-roles>
    </div>

    <div class="w-full" *ngIf="checkListViewSections(content.title)" [id]="content.id">
      <xnode-list-view [content]="content.content" [selectedContent]="selectedContent" [searchTerm]="searchTerm"
        [users]="usersList" [id]="content.id" [specId]="sectionIndex + 1 + '.' + (cIndex + 1)"
        [specItem]="specItem"></xnode-list-view>
    </div>

    <div *ngIf="checkParaViewSections(content.title)" [id]="content.id">
      <xnode-para-view [content]="content.content" [searchTerm]="searchTerm" [users]="usersList" [specItem]="specItem"
        [id]="content.id" [specId]="sectionIndex + 1 + '.' + (cIndex + 1)" [content]="content"
        [selectedContent]="selectedContent"></xnode-para-view>
    </div>

    <div class="gradientback" *ngIf="!content?.collapsed"></div>
    <div class="collapse" *ngIf="content?.collapsed"></div>
  </div>
</div>