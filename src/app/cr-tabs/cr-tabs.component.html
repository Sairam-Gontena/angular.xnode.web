<div class="cr-tabs-div p-4">
  <div class="flex flex-row justify-content-between w-full p-0">
    <p-dropdown formControlName="product" [options]="filters" placeholder="Filter: All" optionLabel="title"
      class="custom-dropdown" [filter]="true" filterBy="title" filterPlaceholder="Search">
      <ng-template let-item pTemplate="item">
        <div class="col-12 flex align-items-center justify-content-between">
          <div class="title-container" [title]="item.title">
            {{item.title }}
          </div>
        </div>
      </ng-template>
    </p-dropdown>
    <div>
      <i class="pi pi-search text-base mx-1 light-grey"></i>
      <i class="pi pi-user text-base mx-1 light-grey"></i>
    </div>
  </div>
  <div class="flex flex-row justify-content-between w-full p-0">
    <p class="text-base light-grey">Today</p>
    <div class="flex flex-row mt-3">
      <i class="pi pi-arrow-up text-base mx-1 text-gray-200"></i>
      <p class="my-0 text-gray-200">Date Created</p>
      <i class="pi pi-chevron-down text-base mx-1 text-gray-200"></i>
    </div>
  </div>
  <p-accordion class="cr-tabs" [multiple]="true">
    <!-- <p-accordionTab class="border-bottom-1" *ngFor="let data of crData" (click)="getCRDetails(data?.id)"> -->
    <p-accordionTab class="border-bottom-1 accordian " *ngFor="let data of crData">
      <ng-template pTemplate="header">
        <div class="grid col-12  flex-column ">
          <div class="flex flex-row  align-items-center">
            <img src="../../assets/high.svg" class="" alt="high" />
            <a href="" class="text-primary-500 text-xs ml-2 "># {{data.crId}}</a>
          </div>
          <div class="flex align-items-center justify-content-between mt-3 ">
            <div class="flex align-items-center  ">
              <div class="flex">
                <img src="../../assets/todo.svg" alt="todo" />
                <div class="ml-2 text-white ">{{data?.title}}</div>
              </div>
              <div class="ml-2 flex align-items-center border-1 pl-2 pr-2 border-round-2xl border-red-500"
                *ngIf="data?.status == 'REJECTED'">
                <div><i class="pi pi-times border-circle text-xs text-red-500 "></i></div>
                <div class="text-xs ml-2 text-red-500  ">Rejected</div>
              </div>
              <div *ngIf="data?.status == 'APPROVED'"
                class="ml-2 flex align-items-center border-1 pl-2 pr-2 border-round-2xl border-green-500  ">
                <div><i class="pi pi-check  text-xs text-green-500 "></i></div>
                <div class="text-xs ml-2 text-green-500  ">Approved</div>
              </div>
              <div *ngIf="data?.status == 'NEEDMOREWORK'"
                class="ml-2 flex align-items-center border-1 pl-2 pr-2 border-round-2xl border-orange-500  ">
                <div><i class="pi pi-clock border-circle text-xs text-orange-500 "></i></div>
                <div class="text-xs ml-2 text-orange-500  ">Pending</div>
              </div>
            </div>
            <div class="flex align-items-center justify-content-between">
              <div class="flex align-items-center mr-1">
                <img src="../../assets/Group.svg" alt="CR" />
                <span class="text-gray-200 ml-2">3</span>
              </div>
              <div class="flex">
                <i class="pi pi-ellipsis-v text-base mx-1 text-gray-200 "
                  (click)="op.toggle($event);$event.stopPropagation();updateSelectedCr(data)"></i>
              </div>
            </div>
          </div>
        </div>

        <!-- <div class="p-0 m-0">
          <div class="flex justify-content-between mt-2 p-0 m-0 ">
            <div class="p-0 m-0">
              <div class="flex flex-row pb-2 align-items-center">
                <img src="../../assets/high.svg" class="" alt="high" />
                <a href="" class="text-primary-500 text-xs ml-2 "># {{data.crId}}</a>
              </div>
            </div>
            <div class="flex">
              <i class="pi pi-ellipsis-v text-base mx-1 text-gray-200 pt-2"
                (click)="op.toggle($event);$event.stopPropagation();updateSelectedCr(data)"></i>
            </div>
          </div>
          <div class="flex flex-column w-full col-12 ">
            <div class="flex align-items-center justify-content-between w-full col-12">
              <div class="flex align-items-center col-12 ">
                <div class="flex">
                  <img src="../../assets/todo.svg" alt="todo" />
                  <div class="ml-2">{{data?.title}}</div>
                </div>
                <div class="ml-2 flex align-items-center border-1 pl-2 pr-2 border-round-2xl border-red-500  ">
                  <div><i class="pi pi-times text-xs text-red-500 "></i></div>
                  <div class="text-xs ml-2 text-red-500  ">Rejected</div>
                </div>
              </div>
              <div class="flex align-items-center mr-1">
                <img src="../../assets/Group.svg" alt="CR" />
                <span class="text-gray-200 ml-2">3</span>
              </div>
              <div class="flex">
                <i class="pi pi-ellipsis-v text-base mx-1 text-gray-200 pt-2"
                  (click)="op.toggle($event);$event.stopPropagation();updateSelectedCr(data)"></i>
              </div>


            </div>

            <div class="flex flex-row justify-content-between w-full px-0">
            <div class="flex flex-column">
              <div class="flex flex-row pb-2 align-items-center">
                <img src="../../assets/high.svg" class="mx-2" alt="high" />
                <a href="" class="text-primary-500 text-xs "># {{data.crId}}</a>
              </div>
            </div>
          </div>
            <div class="flex flex-row justify-content-between w-full px-0">
              <div class="flex flex-row justify-content-between w-full">
                <div class="flex flex-row align-items-center">
                  <img src="../../assets/todo.svg" class="mx-2" alt="todo" />
                  <p class="my-0 text-gray-200">{{data?.title}}</p>
                </div>
                <div class="flex flex-row">
                  <span *ngFor="let reviewers of data?.reviewers">
                    <p-avatar [label]="getMeUserAvatar(reviewers)" class="pt-2" shape="circle"
                      [style]="{ 'background-color': '#9c27b0', 'color': '#ffffff' }"></p-avatar>
                  </span>
                </div>
                <div class="flex">
                  <img src="../../assets/Group.svg" alt="CR" />
                  <span class="mx-1 text-gray-200 mt-2">3</span>
                </div>
                <div class="flex">
                  <i class="pi pi-ellipsis-v text-base mx-1 text-gray-200 pt-2"
                    (click)="op.toggle($event);$event.stopPropagation();updateSelectedCr(data)"></i>
                </div>
              </div>
            </div>
          </div>
        </div> -->
      </ng-template>
      <ng-template pTemplate="content">
        <!-- dont delete write a comment code -->
        <div class="card m-0 p-0  mb-2" *ngIf="showComment">
          <xnode-add-comment-overlay-panel [users]="usersList" [from]="'cr-tabs'" placeHolder="Reason for your actions"
            (commentInfo)="updateCommentsInfo($event)"></xnode-add-comment-overlay-panel>
        </div>
        <div class="border-bottom-1 px-3" *ngFor="let subData of subCRData">
          <div class="flex flex-row justify-content-between align-items-center w-full">
            <p class="my-0 text-gray-200 text-sm font-normal">{{subData?.comment?.referenceContent?.title}}</p>
            <!-- dont delete need to continue after api values updation
              <div  class="flex flex-row justify-content-between w-6 align-items-center">
                  <span class="my-0 text-content text-sm font-normal">#TS0041</span>
                  <p-avatar [label]="getMeUserAvatar(reviewers)" *ngFor="let reviewers of data?.reviewers" class="pt-2" shape="circle" [style]="{ 'background-color': '#9c27b0', color: '#ffffff' }"></p-avatar>
                  <i class="pi pi-ellipsis-v text-base mx-1 text-gray-200 pt-2"></i>
                </div> -->
          </div>
          <div class="py-2 border-bottom-1 px-3">
            <div class="flex flex-row justify-content-between">
              <div class="">
                <div class="relative">
                  <i class="pi pi-plus text-sm border-1 border-200 border-round-sm mx-2"
                    [ngStyle]="{'background-color':'#EFEEEE'}"></i>
                </div>
                <p class="text-content ml-3 pl-4 text-sm font-normal border-left-1 border-50">
                  {{subData?.comment?.referenceContent?.content}}
                </p>
              </div>
            </div>
            <span class="text-lg my-2 text-gray-200 flex align-items-center">
              {{subData.comment.message}}
            </span>
          </div>
        </div>
      </ng-template>
    </p-accordionTab>
  </p-accordion>

  <p-overlayPanel #op>
    <div class="card p-0 m-0 ">
      <div class="flex align-items-center border-bottom-1 border-600 pointer pl-2 p-0 m-0 "
        (click)="updateChagneRequestStatus('APPROVED');op.toggle(false);">
        <i class="pi pi-check border-circle  flex justify-content-center align-items-center text-xs  bg-green-500" [ngStyle]="{padding:'3px'}"></i>
        <p class="text-sm font-normal ml-1 text-green-500 ">Approve</p>
      </div>
      <div class="flex align-items-center border-bottom-1 border-600 pointer pl-2"
        (click)="updateChagneRequestStatus('REJECTED');op.toggle(false);">
        <i class="pi pi-times border-circle flex justify-content-center align-items-center text-xs  bg-red-500" [ngStyle]="{padding:'3px'}"></i>
        <p class="text-sm font-normal ml-1 text-red-500 ">Reject</p>
      </div>
      <div class="flex align-items-center border-bottom-1 border-600 pointer pl-2"
        (click)="updateChagneRequestStatus('NEEDMOREWORK');op.toggle(false)">
        <i class="pi pi-comment flex justify-content-center align-items-center text-xs" [ngStyle]="{}"></i>
        <p class="text-sm font-normal ml-1">Needs work</p>
      </div>
    </div>
  </p-overlayPanel>
</div>
<xnode-confirmation-popup-new [header]="header" [content]="content" [visible]="openConfirmationPopUp"
  (onClickAction)="onClickAction($event)"></xnode-confirmation-popup-new>