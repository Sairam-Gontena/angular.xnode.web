<ng-container *ngIf="authApiService.userLoggedIn; else notLoggedIn">
    <div class="relative">
        <div class="absolute bottom-0 right-0 mobileHide" [class.hidden]="showDockedNavi">
            <xnode-bot (valueChange)="openNavi()"></xnode-bot>
        </div>
        <xnode-app-header (navigateToHome)="navigateToHome()" (logout)="logout()"></xnode-app-header>
        <div class="w-full">
            <div class="flex">
                <div class="app-side-menu-wrapper hidden lg:block mobileHide">
                    <xnode-app-side-menu  (navigateToHome)="navigateToHome()" (enableDockedNavi)="enableDockedNavi()"></xnode-app-side-menu>
                </div>
                <div [class.app-body-wrapper]="!showDockedNavi" [class.app-body-wrapper-navi]="showDockedNavi">
                    <router-outlet></router-outlet>
                </div>
                <div *ngIf="showDockedNavi" [class.hidden]="!showDockedNavi" [class.navi-ful-frame]="isNaviExpanded" class="mobileHide"
                    [class.navi-frame]="!isNaviExpanded && showDockedNavi">
                    <div class="flex justify-content-center align-items-center h-full" *ngIf="showNaviSpinner">
                        <p-progressSpinner ariaLabel="loading"></p-progressSpinner>
                    </div>
                    <iframe id="naviFrame" *ngIf="iframeUrl && !showNaviSpinner" [src]="iframeUrl" allow="microphone"
                        Cross-Origin-Opener-Policy="*" class="w-full h-full pl-0 pr-0 ifram-navi">
                    </iframe>
                </div>
            </div>
        </div>
    </div>
</ng-container>
<ng-template #notLoggedIn>
    <router-outlet></router-outlet>
</ng-template>

<p-toast [breakpoints]="{'920px': {width: '100%', right: '0', left: '0'}}"></p-toast>
<ngx-spinner size="medium" type="ball-clip-rotate-multiple"></ngx-spinner>
<xnode-product-alert-popup *ngIf="showProductStatusPopup" (closePopup)="closePopup()" [contentdata]="content"
    (openDockedNavi)="openNavi()" [showProductStatusPopup]="showProductStatusPopup"></xnode-product-alert-popup>
<xnode-limit-reached-popup *ngIf="showLimitReachedPopup" [visible]="showLimitReachedPopup"
    (closePopup)="this.showLimitReachedPopup = false;"></xnode-limit-reached-popup>
<xnode-import-file-popup [visible]="showImportFilePopup" (closeEventEmitter)="this.showImportFilePopup = false;"
    [conversation_id]="conversation_id"></xnode-import-file-popup>
<xnode-view-summary-popup [visible]="showSummaryPopup" [notifObj]="notifObj" [convSummary]="convSummary"
    [conversationID]="conversation_id" (closePopUp)="this.showSummaryPopup = false"></xnode-view-summary-popup>
<xnode-inactive-timeout-popup *ngIf="showInactiveTimeoutPopup" [visible]="showInactiveTimeoutPopup" [countdown]="inactiveTimeoutCounter"
(closePopup)="this.showInactiveTimeoutPopup = false;" (logout)="logout()"></xnode-inactive-timeout-popup>
