<div class="app-header-wrapper flex align-content-center flex-wrap">
    <div class="w-9 flex gap-5">
        <div class="flex flex-row">
            <img src="./assets/logo-x.svg" alt="x-logo">
            <img src="./assets/logo-node.svg" alt="x-node" routerLink="/my-products" class="pointer">
        </div>
        <div *ngFor="let item of headerItems" class="header-menu-item">
            {{item.label}}
        </div>
    </div>
    <div class="w-3 flex gap-2 justify-content-end align-content-center">
        <div class=" flex justify-content-center align-content-center">
            <i *ngIf="notificationCount > 0" class="pi pi-bell text-lg mr-2 mt-1 notif-icon" pBadge="false"
                value={{notificationCount}} severity="danger" (click)=" op.show($event)"></i>
            <i *ngIf="notificationCount == 0" class="pi pi-bell text-base mr-2 mt-1 notif-icon" (click)=" op.show($event)"></i>
            <p-overlayPanel #op
                [style]="{'width': '350px','height':'500px','background-color':'#24232C','padding':'0'}">
                <div>
                    <div class="flex justify-content-between">
                        <div class="text-white text-base">Notifications</div>
                        <div class="flex">
                            <img src="./assets/mute-notification.svg" alt="bell" class="w-0.3rem h-0.3rem mr-2">
                            <i class="pi pi-ellipsis-h text-lg  "></i>
                        </div>
                    </div>
                </div>
                <div *ngIf="allNotifications.length > 0" class="flex  mt-3 notification-btns">
                    <div class="flex align-items-center ml-3">
                        <div [class]="filterTypes.all ? 'text-white text-sm' : 'text-sm'"
                            (click)="filterNotifications('all')">All</div>
                    </div>
                    <div class="flex align-items-center ml-2">
                        <div [class]="filterTypes.recent ? 'text-white text-sm' : 'text-sm'"
                            (click)="filterNotifications('recent')">Recent</div>
                        <div
                            style="height: 8px;width: 8px;border-radius: 4px;background-color: #F90707;margin-left: 5px;">
                        </div>
                    </div>
                    <div class="flex align-items-center ml-3">
                        <div [class]="filterTypes.important? 'text-white text-sm' : 'text-sm'"
                            (click)="filterNotifications('important')">Important</div>
                        <div
                            style="height: 8px;width: 8px;border-radius: 4px;background-color: #F90707;margin-left: 5px;">
                        </div>
                    </div>
                    <div class="flex align-items-center ml-3">
                        <div [class]="filterTypes.pined ? 'text-white text-sm' : 'text-sm'"
                            (click)="filterNotifications('pined')">Pinned</div>
                    </div>

                </div>
                <div *ngIf="allNotifications.length > 0" class="flex justify-content-between mt-3 text-white">
                    <div class="flex align-items-center">
                        <div class="text-xs">Filter</div>
                        <i class="pi pi-sort-amount-up text-xs ml-2"></i>
                    </div>
                    <div class="flex align-items-center" (click)="navigateToUrl()">
                        <div class="text-xs">See all in activity log</div>
                        <i class="pi pi-arrow-right text-xs ml-2"></i>
                    </div>
                </div>
                <div class="notif-list" *ngIf="allNotifications.length > 0">
                    <div *ngFor="let notification of notifications"
                        class="flex p-2 border-50 notif-card text-white text-xs justify-content-between">
                        <div class="flex">
                            <div>
                                <p-badge class="text-xs"
                                    *ngIf="notification.status == 'success' || notification.status == 'pending' || notification.status == 'reject'"
                                    [severity]="notification.status == 'success' ? 'success' : notification.status == 'pending' ? 'warning' : notification.status == 'reject' ? 'danger' : null"></p-badge>
                                <div class="icon"
                                    *ngIf="notification.status != 'success' && notification.status != 'pending' && notification.status != 'reject'">
                                </div>
                            </div>
                            <div class="ml-2">
                                <div>{{notification.title}}</div>
                                <div class="text-500 mt-2">{{notification.description}}</div>
                                <div class="flex mt-2" *ngIf="notification.type === 'request'">
                                    <div class="text-white border-round-3xl border-1 pl-4 pr-4 pt-1 pb-1">Decline</div>
                                    <div class="text-white border-round-3xl pl-4 pr-4 pt-1 pb-1 ml-2 accept-btn  ">
                                        Accept</div>
                                </div>
                                <div class="flex mt-2" *ngIf="notification.type === 'publish'">
                                    <div class="text-500 text-xs border-round-3xl border-1 pl-4 pr-4 pt-1 pb-1  ">
                                        Click here to publish
                                        <i class=" text-white pi pi-arrow-right text-xs ml-2"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <i class="pi pi-ellipsis-h text-lg text-500 " (click)=" op1.show($event)"></i>
                            <p-overlayPanel #op1 [style]="{'background-color':'#24232C','padding':'0'}">
                                <div class="flex">
                                    <img src="../../../assets/double-check.svg" class="w-0.5rem h-0.5rem">
                                    <div class="text-xs text-500 ml-2"
                                        (click)="toggleNotificationRead('read',notification.id)"
                                        *ngIf="!notification.read">Mark as
                                        read
                                    </div>
                                    <div class="text-xs text-500 ml-2"
                                        (click)="toggleNotificationRead('unread',notification.id)"
                                        *ngIf="notification.read">Mark as
                                        unread
                                    </div>
                                </div>
                                <div class="flex mt-2">
                                    <img src="../../../assets/pin.svg" class="w-0.5rem h-0.5rem">
                                    <div class="text-xs text-500 ml-2"
                                        (click)="toggleNotificationPinned('pined',notification.id)"
                                        *ngIf="!notification.pined">Pin
                                    </div>
                                    <div class="text-xs text-500 ml-2"
                                        (click)="toggleNotificationPinned('unpined',notification.id)"
                                        *ngIf="notification.pined">
                                        Un Pin
                                    </div>
                                </div>
                            </p-overlayPanel>
                            <div class="text-500 mt-1">{{notification.receivedon}}</div>
                        </div>
                    </div>
                </div>
                <div class="mt-5" *ngIf="allNotifications.length === 0">
                    <h5>No New Notifications Found</h5>
                </div>
            </p-overlayPanel>
        </div>
        <img src="./assets/dp.svg" alt="dp" class="mr-2">
        <p-splitButton label="Raymond Nelson" [model]="logoutDropdown" styleClass="p-button-raised"></p-splitButton>
    </div>
</div>
<p-toast></p-toast>